@model RestaurantManager.Models.Order
@{
    ViewData["Title"] = $"Rachunek #{Model.Id}";
    Layout = "_Layout"; // Możesz zmienić na null jeśli chcesz czysty HTML do druku bez nagłówka strony
}

<div class="container mt-5">
    <div class="card mx-auto shadow-sm" style="max-width: 400px;">
        <div class="card-body">
            <div class="text-center mb-4">
                <h2 class="mb-0">Restauracja XYZ</h2>
                <p class="text-muted">ul. Smaczna 12, Warszawa</p>
                <hr />
                <h4>Rachunek nr #@Model.Id</h4>
                <p>@Model.ScheduledDate.ToString("yyyy-MM-dd HH:mm")</p>
                @if (Model.Table != null)
                {
                    <p><strong>@Model.Table.Name</strong></p>
                }
                else
                {
                    <p><strong>Zamówienie Online / Wynos</strong></p>
                }
            </div>

            <table class="table table-sm table-borderless">
                <thead>
                    <tr class="border-bottom">
                        <th>Nazwa</th>
                        <th class="text-end">Ilość</th>
                        <th class="text-end">Cena</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var item in Model.OrderItems)
                    {
                        <tr>
                            <td>@item.MenuItem.Name</td>
                            <td class="text-end">@item.Quantity</td>
                            <td class="text-end">@((item.UnitPrice * item.Quantity).ToString("F2"))</td>
                        </tr>
                    }
                </tbody>
                <tfoot class="border-top fw-bold">
                    <tr>
                        <td colspan="2">RAZEM:</td>
                        <td class="text-end">@Model.TotalAmount.ToString("F2") zł</td>
                    </tr>
                </tfoot>
            </table>

            <div class="text-center mt-3">
                <p class="mb-1">Metoda płatności: <strong>@Model.PaymentMethod</strong></p>
                <p class="small text-muted">Dziękujemy i zapraszamy ponownie!</p>
            </div>
        </div>
        <div class="card-footer bg-white d-print-none text-center">
            <button onclick="window.print()" class="btn btn-primary btn-lg w-100 mb-2">
                <i class="bi bi-printer"></i> Drukuj
            </button>
            <a asp-action="Tables" class="btn btn-secondary w-100">Wróć do Mapy Stolików</a>
        </div>
    </div>
</div>

<style>
    /* Ukrywamy wszystko inne podczas drukowania */
    @@media print {
        body * {
            visibility: hidden;
        }

        .card, .card * {
            visibility: visible;
        }

        .card {
            position: absolute;
            left: 0;
            top: 0;
            width: 100%;
            border: none !important;
            box-shadow: none !important;
        }

        .d-print-none {
            display: none !important;
        }
    }
</style>